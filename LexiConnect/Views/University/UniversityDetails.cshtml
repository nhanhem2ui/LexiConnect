@{
    Layout = "_Layout";
    ViewData["Title"] = Model.University.Name;
}
@model LexiConnect.Models.ViewModels.UniversityDetailsViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Model.University.Name - LexiConnect</title>
    <link rel="stylesheet" href="~/css/University/UniversityDetails.css" />
</head>

<body>
    <div class="dashboard-container">
        <partial name="_Sidebar" />

        <!-- Main Content -->
        <div class="main-content">
            <!-- Breadcrumb Navigation -->
            <nav class="breadcrumb">
                <a href="@Url.Action("Index", "Home")">Home</a>
                <span class="separator">›</span>
                <a href="@Url.Action("Universities", "Home")">Universities</a>
                <span class="separator">›</span>
                <span class="current">@Model.University.Name</span>
            </nav>

            <!-- University Header -->
            <div class="university-header">
                <div class="university-logo">
                    @if (!string.IsNullOrEmpty(Model.University.LogoUrl))
                    {
                        <img src="@Url.Content(Model.University.LogoUrl)" alt="@Model.University.Name" />
                    }
                    else
                    {
                        <div class="logo-placeholder">
                            <svg viewBox="0 0 24 24" width="48" height="48">
                                <path d="M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3ZM18.82 9L12 12.72L5.18 9L12 5.28L18.82 9ZM17 15.99L12 18.72L7 15.99V12.27L12 15L17 12.27V15.99Z" />
                            </svg>
                        </div>
                    }
                </div>
                <div class="university-info">
                    <h1>@Model.University.Name</h1>
                    @if (!string.IsNullOrEmpty(Model.University.ShortName))
                    {
                        <p class="short-name">(@Model.University.ShortName)</p>
                    }
                    <div class="university-location">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z" />
                        </svg>
                        @Model.University.City, @Model.University.Country.CountryName
                    </div>
                    <div class="university-meta">
                        <span class="meta-item">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path d="M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3Z" />
                            </svg>
                            @Model.TotalCourses courses
                        </span>
                        <span class="meta-item">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" />
                            </svg>
                            @Model.TotalDocuments documents
                        </span>
                    </div>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="search-bar-container">
                <form asp-action="Details" asp-route-id="@Model.University.Id" method="get" class="search-wrapper">
                    <svg viewBox="0 0 24 24" width="20" height="20" class="search-icon">
                        <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                    </svg>
                    <input type="text" name="search" value="@Model.SearchQuery" placeholder="Search for courses in this university" class="search-input" />
                    <input type="hidden" name="sort" value="@Model.CurrentSort" />
                    <input type="hidden" name="letter" value="@Model.SelectedLetter" />
                </form>
            </div>

            <!-- Popular Documents Section -->
            <div class="documents-section">
                <div class="section-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z" />
                        </svg>
                        Popular documents
                    </h2>
                </div>
                <div class="documents-grid">
                    @foreach (var doc in Model.PopularDocuments)
                    {
                        <a href="@Url.Action("ViewDocument", "Home", new { id = doc.DocumentId })" class="document-card-small">
                            <div class="document-thumbnail-small">
                                @if (!string.IsNullOrEmpty(doc.ThumbnailUrl))
                                {
                                    <img src="@Url.Content(doc.ThumbnailUrl)" alt="@doc.Title" />
                                }
                                else
                                {
                                    <div class="thumbnail-placeholder">
                                        <svg viewBox="0 0 24 24" width="40" height="40">
                                            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" />
                                        </svg>
                                    </div>
                                }
                            </div>
                            <div class="document-info-small">
                                <h4>@doc.Title</h4>
                                <p class="course-name">@doc.CourseName</p>
                                <div class="document-stats">
                                    <span>
                                        <svg viewBox="0 0 24 24" width="14" height="14">
                                            <path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5Z" />
                                        </svg>
                                        @doc.ViewCount
                                    </span>
                                    <span class="likes">
                                        <svg viewBox="0 0 24 24" width="14" height="14">
                                            <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" />
                                        </svg>
                                        @doc.LikeCount
                                    </span>
                                </div>
                            </div>
                        </a>
                    }
                </div>
            </div>

            <!-- Recent Documents Section -->
            <div class="documents-section">
                <div class="section-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" />
                        </svg>
                        Recent documents
                    </h2>
                </div>
                <div class="documents-grid">
                    @foreach (var doc in Model.RecentDocuments)
                    {
                        <a href="@Url.Action("ViewDocument", "Home", new { id = doc.DocumentId })" class="document-card-small">
                            <div class="document-thumbnail-small">
                                @if (!string.IsNullOrEmpty(doc.ThumbnailUrl))
                                {
                                    <img src="@Url.Content(doc.ThumbnailUrl)" alt="@doc.Title" />
                                }
                                else
                                {
                                    <div class="thumbnail-placeholder">
                                        <svg viewBox="0 0 24 24" width="40" height="40">
                                            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" />
                                        </svg>
                                    </div>
                                }
                            </div>
                            <div class="document-info-small">
                                <h4>@doc.Title</h4>
                                <p class="course-name">@doc.CourseName</p>
                                <p class="upload-time">@doc.CreatedAt.ToString("MMM dd, yyyy")</p>
                            </div>
                        </a>
                    }
                </div>
            </div>

            <!-- Courses Section -->
            <div class="courses-section">
                <div class="section-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3Z" />
                        </svg>
                        Courses (@Model.TotalCourses)
                    </h2>
                    <div class="sort-controls">
                        <a href="@Url.Action("Details", new { id = Model.University.Id, sort = "name", search = Model.SearchQuery, letter = Model.SelectedLetter })"
                           class="sort-btn @(Model.CurrentSort == "name" ? "active" : "")">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path d="M3 18H9V16H3V18ZM3 6V8H21V6H3ZM3 13H15V11H3V13Z" />
                            </svg>
                            Name
                        </a>
                        <a href="@Url.Action("Details", new { id = Model.University.Id, sort = "popular", search = Model.SearchQuery, letter = Model.SelectedLetter })"
                           class="sort-btn @(Model.CurrentSort == "popular" ? "active" : "")">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z" />
                            </svg>
                            Popular
                        </a>
                        <a href="@Url.Action("Details", new { id = Model.University.Id, sort = "recent", search = Model.SearchQuery, letter = Model.SelectedLetter })"
                           class="sort-btn @(Model.CurrentSort == "recent" ? "active" : "")">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2Z" />
                            </svg>
                            Recent
                        </a>
                    </div>
                </div>

                <!-- Alphabet Filter -->
                <div class="alphabet-filter">
                    <a href="@Url.Action("Details", new { id = Model.University.Id, sort = Model.CurrentSort, search = Model.SearchQuery, letter = "All" })"
                       class="letter-btn @(Model.SelectedLetter == "All" ? "active" : "")">All</a>
                    @foreach (var letter in "ABCDEFGHIJKLMNOPQRSTUVWXYZ")
                    {
                        <a href="@Url.Action("Details", new { id = Model.University.Id, sort = Model.CurrentSort, search = Model.SearchQuery, letter = letter.ToString() })"
                           class="letter-btn @(Model.SelectedLetter == letter.ToString() ? "active" : "")">@letter</a>
                    }
                </div>

                <!-- Courses List -->
                <div class="courses-list">
                    @if (Model.Courses.Any())
                    {
                        @foreach (var course in Model.Courses)
                        {
                            <a href="@Url.Action("CourseDetails", "Course", new { id = course.CourseId })" class="course-item">
                                <div class="course-icon-small">
                                    <svg viewBox="0 0 24 24" width="32" height="32">
                                        <path d="M4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6ZM20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H8V4H20V16Z" />
                                    </svg>
                                </div>
                                <div class="course-details">
                                    <h3>@course.CourseName</h3>
                                    <p class="course-code">@course.CourseCode</p>
                                    <p class="major-name">@course.MajorName</p>
                                </div>
                                <div class="course-stats">
                                    <span>
                                        <svg viewBox="0 0 24 24" width="14" height="14">
                                            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" />
                                        </svg>
                                        @course.DocumentCount
                                    </span>
                                </div>
                            </a>
                        }
                    }
                    else
                    {
                        <div class="no-results">
                            <svg viewBox="0 0 24 24" width="48" height="48">
                                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" />
                            </svg>
                            <p>No courses found matching your criteria.</p>
                        </div>
                    }
                </div>
            </div>

            <!-- Content Categories Sidebar -->
            <div class="sidebar-section">
                <h3>Content categories</h3>
                <div class="category-list">
                    @foreach (var category in Model.ContentCategories)
                    {
                        <div class="category-item">
                            <span class="category-name">@category.Key.Replace("_", " ")</span>
                            <span class="category-count">@category.Value</span>
                        </div>
                    }
                </div>
            </div>

            <!-- Other Universities Section -->
            @if (Model.OtherUniversities.Any())
            {
                <div class="other-universities-section">
                    <div class="section-header">
                        <h2>
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path d="M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3Z" />
                            </svg>
                            Other Universities
                        </h2>
                    </div>
                    <div class="universities-grid">
                        @foreach (var uni in Model.OtherUniversities)
                        {
                            <a href="@Url.Action("Details", new { id = uni.Id })" class="university-card">
                                <div class="uni-logo">
                                    @if (!string.IsNullOrEmpty(uni.LogoUrl))
                                    {
                                        <img src="@Url.Content(uni.LogoUrl)" alt="@uni.Name" />
                                    }
                                    else
                                    {
                                        <svg viewBox="0 0 24 24" width="40" height="40">
                                            <path d="M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3Z" />
                                        </svg>
                                    }
                                </div>
                                <div class="uni-info">
                                    <h4>@uni.Name</h4>
                                    <p class="uni-location">@uni.City</p>
                                </div>
                            </a>
                        }
                    </div>
                </div>
            }
        </div>
    </div>

    <form asp-antiforgery="true"></form>
    <script src="~/js/University/UniversityDetails.js"></script>
</body>
</html>