@{
    Layout = "_Layout";
    ViewData["Title"] = "All Courses";
}
@model LexiConnect.Models.ViewModels.AllCoursesViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Courses</title>
    <link rel="stylesheet" href="~/css/Course/AllCourses.css" />
</head>

<body>
    <div class="dashboard-container">
        <partial name="_Sidebar" />

        <div class="main-content">
            <!-- Hero Section -->
            <div class="hero-section">
                <div class="hero-illustration">
                    <svg viewBox="0 0 64 64" width="128" height="128" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <defs>
                                <style>
                                    .cls-1 {
                                        fill: #6096ba;
                                    }

                                    .cls-2 {
                                        fill: #274c77;
                                    }

                                    .cls-3 {
                                        fill: #ffbc0a;
                                    }

                                    .cls-4 {
                                        fill: #f5dd90;
                                    }
                                </style>
                            </defs>
                            <rect class="cls-1" x="8" y="16" width="48" height="36" rx="2" />
                            <rect class="cls-2" x="12" y="20" width="40" height="4" />
                            <rect class="cls-3" x="12" y="28" width="24" height="3" />
                            <rect class="cls-3" x="12" y="34" width="32" height="3" />
                            <rect class="cls-3" x="12" y="40" width="28" height="3" />
                            <circle class="cls-4" cx="44" cy="36" r="6" />
                            <path class="cls-2" d="M44,42a6,6,0,1,1,6-6A6,6,0,0,1,44,42Zm0-10a4,4,0,1,0,4,4A4,4,0,0,0,44,32Z" />
                        </g>
                    </svg>
                </div>
                <h1 class="hero-title">Explore Courses at LexiConnect</h1>
                <p class="hero-subtitle">Search and discover study materials for your courses</p>

                <!-- Search Box -->
                <div class="search-container">
                    <input type="text"
                           id="courseSearch"
                           class="search-input-large"
                           placeholder="Search for courses by name or code..."
                           value="@Model.SearchQuery"
                           autocomplete="off" />
                    <button class="search-btn-large">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                        </svg>
                    </button>
                    <div id="searchResults" class="search-results-dropdown"></div>
                </div>
            </div>

            <!-- Popular Courses Section -->
            @if (Model.PopularCourses.Any())
            {
                <section class="section">
                    <h2 class="section-title">Most popular courses</h2>
                    <div class="courses-list">
                        @foreach (var course in Model.PopularCourses)
                        {
                            <a href="@Url.Action("CourseDetails", "Course", new { id = course.CourseId })" class="course-link">
                                <svg viewBox="0 0 24 24" width="20" height="20" class="course-icon">
                                    <path d="M19,2H5C3.89,2 3,2.89 3,4V20C3,21.11 3.89,22 5,22H19C20.11,22 21,21.11 21,20V4C21,2.89 20.11,2 19,2M19,20H5V4H19V20M17,12H7V14H17V12M17,9H7V11H17V9M17,6H7V8H17V6Z" />
                                </svg>
                                <span class="course-name">@course.CourseCode - @course.CourseName</span>
                                <span class="course-docs">@course.Documents.Count(d => d.Status == "approved") docs</span>
                            </a>
                        }
                    </div>
                </section>
            }

            <!-- All Courses Section -->
            <section class="section">
                <h2 class="section-title">Browse All Courses</h2>
                <p class="section-subtitle">Search your course by its first letter</p>

                <!-- Alphabet Filter -->
                <div class="alphabet-filter">
                    <a href="@Url.Action("AllCourses", new { search = Model.SearchQuery, letter = "All" })"
                       class="letter-btn @(Model.SelectedLetter == "All" ? "active" : "")">All</a>
                    @foreach (var letter in "ABCDEFGHIJKLMNOPQRSTUVWXYZ")
                    {
                        <a href="@Url.Action("AllCourses", new { search = Model.SearchQuery, letter = letter.ToString() })"
                           class="letter-btn @(Model.SelectedLetter == letter.ToString() ? "active" : "")">@letter</a>
                    }
                </div>

                <!-- Courses Grid -->
                <div class="courses-grid">
                    @if (Model.Courses.Any())
                    {
                        @foreach (var course in Model.Courses)
                        {
                            <a href="@Url.Action("CourseDetails", "Course", new { id = course.CourseId })" class="course-card">
                                <div class="card-icon">
                                    <svg viewBox="0 0 24 24" width="32" height="32">
                                        <path d="M19,2H5C3.89,2 3,2.89 3,4V20C3,21.11 3.89,22 5,22H19C20.11,22 21,21.11 21,20V4C21,2.89 20.11,2 19,2M19,20H5V4H19V20M17,12H7V14H17V12M17,9H7V11H17V9M17,6H7V8H17V6Z" />
                                    </svg>
                                </div>
                                <div class="card-content">
                                    <div class="card-badge">@course.CourseCode</div>
                                    <h3 class="card-title">@course.CourseName</h3>
                                    @if (!string.IsNullOrEmpty(course.Major?.Name))
                                    {
                                        <p class="card-subtitle">@course.Major.Name</p>
                                    }
                                    <div class="card-meta">
                                        @if (course.Semester.HasValue)
                                        {
                                            <span class="meta-item">
                                                <svg viewBox="0 0 24 24" width="16" height="16">
                                                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z" />
                                                </svg>
                                                Semester @course.Semester
                                            </span>
                                        }
                                        <span class="meta-item">
                                            <svg viewBox="0 0 24 24" width="16" height="16">
                                                <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z" />
                                            </svg>
                                            @course.Documents.Count(d => d.Status == "approved") documents
                                        </span>
                                    </div>
                                </div>
                            </a>
                        }
                    }
                    else
                    {
                        <div class="no-results">
                            <svg viewBox="0 0 24 24" width="48" height="48">
                                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" />
                            </svg>
                            <p>No courses found matching your criteria.</p>
                        </div>
                    }
                </div>

                @if (Model.Courses.Count >= 30)
                {
                    <div class="max-results-notice">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" />
                        </svg>
                        <span>Showing maximum 30 results. Use search or filters to narrow down.</span>
                    </div>
                }
            </section>
        </div>
    </div>

    <script src="~/js/Course/AllCourses.js"></script>
</body>
</html>