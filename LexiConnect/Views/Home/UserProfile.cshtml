@{
    Layout = "_Layout";
    ViewData["Title"] = "UserProfile";
}
@model LexiConnect.Models.ViewModels.UserProfileViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - LexiConnect</title>
    <link rel="stylesheet" href="~/css/Home/UserProfile.css" />
</head>

<body>
    <div class="dashboard-container">
        
        <partial name="_Sidebar"/>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar-large">B</div>
                <div class="profile-info">
                    <h1>@Model.User.FullName</h1>
                    <p class="affiliation">@Model.User.University.Name</p>
                    <div class="profile-stats-row">
                        <div class="stat-card">
                            <span class="number">@Model.Documents.Count()</span>
                            <span class="label">Uploads</span>
                        </div>
                        <div class="stat-card">
                            <span class="number">@Model.FollowerNum</span>
                            <span class="label">Follows</span>
                        </div>
                        <div class="stat-card">
                            <span class="number">@Model.Upvotes</span>
                            <span class="label">Upvotes</span>
                        </div>
                    </div>
                </div>
                <a href="@Url.Action("EditProfile, Home")" class="btn-edit">Edit Profile</a>
            </div>

            <!-- Profile Sections -->
            <div class="profile-sections">
                <!-- My Uploads Section -->
                <div class="profile-section">
                    <h2 class="section-title">
                        <span>📚</span>
                        My Uploads
                    </h2>
                    <div class="uploads-list">
                        @foreach (var document in Model.Documents)
                        {
                            <a href="#" style="text-decoration: none;">
                                <div class="upload-item">
                                    <div class="upload-icon">📄</div>
                                    <div class="upload-details">
                                        <h4>@document.Title</h4><p>
                                            @(document.Description?.Length > 35
                                                                                    ? document.Description.Substring(0, 35) + "..."
                                                                                    : document.Description)
                                    </p>
                                </div>
                                <div class="upload-stats">
                                    <div class="views">@document.ViewCount views</div>
                                    <div class="rating">
                                        <svg viewBox="0 -0.5 21 21" width="21" height="21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>like [#1385]</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Dribbble-Light-Preview" transform="translate(-259.000000, -760.000000)" fill="#000000"> <g id="icons" transform="translate(56.000000, 160.000000)"> <path d="M203,620 L207.200006,620 L207.200006,608 L203,608 L203,620 Z M223.924431,611.355 L222.100579,617.89 C221.799228,619.131 220.638976,620 219.302324,620 L209.300009,620 L209.300009,608.021 L211.104962,601.825 C211.274012,600.775 212.223214,600 213.339366,600 C214.587817,600 215.600019,600.964 215.600019,602.153 L215.600019,608 L221.126177,608 C222.97313,608 224.340232,609.641 223.924431,611.355 L223.924431,611.355 Z" id="like-[#1385]"> </path> </g> </g> </g> </g></svg>
                                        @document.LikeCount
                                    </div>
                                </div>
                            </div>
                        </a>
                                                }
                    </div>
                </div>

                <!-- Recent Activity Section -->
                <div class="profile-section">
                    <h2 class="section-title">
                        <span>⚡</span>
                        Recent Activity
                    </h2>
                    <div class="activity-list">
                        @foreach (var activity in Model.RecentActivities)
                        {
                            if (activity.CourseId > 0 && activity.Course != null)
                            {
                                <div class="activity-item">
                                    <div class="activity-icon">📤</div>
                                    <div class="activity-content">
                                        <h4>@activity.Course.CourseName</h4>
                                        <p>
                                            @activity.Course.Description?.Length > 35
                                            ? @activity.Course.Description?.Substring(0, 35) + "..."
                                            : @activity.Course.Description
                                        </p>

                                    </div>
                                    <div class="activity-time">Academic year: @activity.Course.AcademicYear</div>
                                </div>
                            }
                            if (activity.DocumentId > 0 && activity.Document != null)
                            {
                                <div class="activity-item">
                                    <div class="activity-icon">📤</div>
                                    <div class="activity-content">
                                        <h4>@activity.Document.Title</h4>
                                        <p>
                                            @activity.Document.Description?.Length > 35
                                            ? @activity.Document.Description?.Substring(0, 35) + "..."
                                            : @activity.Document.Description
                                        </p>

                                    </div>
                                    <div class="activity-time">Create at: @activity.Document.CreatedAt</div>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>